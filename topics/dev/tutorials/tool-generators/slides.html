---
layout: tutorial_slides
logo: GTN
video: true
title: "Introduction to the ToolFactory tutorial."
zenodo_link: ""
questions:
  - "What is the ToolFactory?"
  - "Can it really generate a real Galaxy tool from a simple, working command line script?"
  - "Is it of any use for my work?"
  - "I've got a working script with test data and parameter settings, how do I use the ToolFactory?"
objectives:
  - "Learn whether this training material is useful for your work in Galaxy"
key_points:
  - "The ToolFactory is an unusual Galaxy tool for developers"
  - "It uses the usual Galaxy tool interface"
  - "It can turn a simple script into a Galaxy tool"
  - "Samples are provided using python, perl, bash, sed and Rscript"
  - "Any system utility or scripting language in Conda could be used to interpret a script"
  - "Generated tools are toolshed-ready and have a built in test"
  - "The test is based on the sample data provided on the ToolFactory form"
  - "Generated code passes planemo linting"
  - "A code generator can only cope with a subset of all possible tools"
  - "The ToolFactory is very efficient for simple scripts requiring only a few parameters and I/O files"
contributors:
  - fubar2

---

# What is the ToolFactory?

- The ToolFactory is an unusual Galaxy tool
- It generates new tools from working command line scripts.
- It is only useful if you want to make new Galaxy tools that run your own code.

???

The Toolfactory is a Galaxy tool for developers who routinely write their own code.
It generates new Galaxy tools from working command line scripts.

---

# What is a **working command line script**?

- A script is a computer program run using an interpreter such as bash, Rscript or Python.
- It must run correctly when tested manually in a Linux shell by constructing a suitable command line.
- The command line must include all the parameter settings, data input file paths and output file paths for the script.
- These are usually passed using either named ("argparse" style) or as positional parameters where the order is critical.
- Invoking that command line must produce correct output files.
- For example: ```python3 my_python_script.py --infile mysample.fasta --outfile mysample.out --latkes "no_onion" --apple-sauce "yes, please!"```

???

The ToolFactory is only useful if you write analysis or other software routinely in your work.
It can help you turn a working script with test data into a tool.
It will not fix bugs in the script so make sure the script works properly first!
Without a script, it is about as useful as a chocolate teapot.

---

# How does it generate new tools in a Galaxy history?

- A toolshed ready archive is generated, with a Planemo test and other reports.
- Generated tools look and work just like manually prepared Galaxy tools.

???

A Toolshed archive containing the new tool is written to the history.
The planemo test report, a copy of the generated XML wrapper and a log file are also available.

---

# What does the developer need to do ?

- Once the script works correctly in a shell, the samples used must be uploaded into a new Galaxy history before you start.
- They are required as samples as each input for the new tool is described.
- Each output file and script parameter must also be described.
- These descriptions are all collected on the Galaxy form of the ToolFactory tool.

???

The developer prepares the working script and samples.
The ToolFactory tool is started in Galaxy after uploading all the sample input files.
It collects all the information needed to generate a new Galaxy tool.
The samples become the inputs for the built in test.

---

# What happens when the ToolFactory is executed?

- The ToolFactory uses the information from the completed form to drive an automated code generator.
- The generator uses Galaxyxml.
- Code generators have many limits compared to writing tools with the standard tool development toolkit.
- They are much easier to learn to use, even if they are limited.
- Test outputs are generated with Planemo then the new toolshed archive is tested with Planemo.
- The job that generates a tool can be re-run like any other persisted Galaxy job
- This allows the new tool to be adjusted and regenerated at any time if changes are needed.

???

A code generator can only work for a subset of all possible Galaxy tools.
In practice, it works best with scripts because the code can be adjusted to work around some limitations.
ToolFactory jobs can be re-run, so the new tool can be adjusted and regenerated at any time.

---

# The big picture

![Galaxy as an IDE for tools with the ToolFactory](../../images/ToolFactory_big_picture.png)

???

Galaxy can serve as a persistent integrated tool development environment.
The developer supplies all the details for the new tool on the form, including a known good script with test data.
Executing the settings runs a job that generates and then tests the new tool.
The developer can return to adjust the ToolFactor form and generate an updated tool at any time.
ToolFactory jobs are like any other jobs - clicking the redo button will recreate the form used.
In this way, tools can easily be maintained as long as the job that generates them is saved.

